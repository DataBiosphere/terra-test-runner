name: 'sync-component-version'
description: 'Sync MC Terra Module versions'
author: ''
inputs:
  env_type:
    description: 'Environment type: live, personal, preview'
    required: true
    default: ''
  environment:
    description: 'Environment: live - perf, personal - wsmtest, etc'
    required: true
    default: ''
  token:
    description: 'Token used to run authenticated git commands'
    required: true
    default: ''
runs:
  using: "composite"
  steps:
    # Check out terra-helm repo
    - uses: actions/checkout@v2
      with:
        repository: broadinstitute/terra-helm
        ref: master
        path: terra-helm

    - uses: actions/checkout@v2
      with:
        repository: broadinstitute/terra-helmfile
        ref: master
        token: ${{ inputs.token }}
        path: terra-helmfile

    - name: Sync MC Terra Module versions
      id: sync-terra-versions
      run: |
        set -e
        yq --version
      shell: bash
